import{j as d}from"./jsx-runtime-BLI8ZJsa.js";import{r as o}from"./index-CP26dfb2.js";import{u as c}from"./components-BlTBjdub.js";function _(){c();const s=c(),t=c(),r=c(),h=c(),[l,m]=o.useState(""),[p,u]=o.useState(""),[x,y]=o.useState(null);return o.useEffect(()=>{const e=window.location.search,a=new URLSearchParams(e);let n=a.get("code"),i=a.get("state");n&&setTimeout(()=>{s.submit({grant_type:"authorization_code",code:n,state:i},{method:"post",action:"/api/pinterest/auth"})},5e3)},[]),o.useEffect(()=>{var e;(e=s==null?void 0:s.data)!=null&&e.access_token&&(m(s.data.access_token),u(s.data.refresh_token),t.submit({access_key:s.data.access_token},{method:"post",action:"/api/pinterest/user_account"}))},[s.data]),o.useEffect(()=>{var e,a,n;if((e=t==null?void 0:t.data)!=null&&e.id){const i=window.location.search,f=new URLSearchParams(i);f.get("code");let g=f.get("state");r.submit({shopifyShopId:g,pinterestUserId:(a=t==null?void 0:t.data)==null?void 0:a.id,accessToken:l,refreshToken:p,userName:(n=t==null?void 0:t.data)==null?void 0:n.username},{method:"post",action:"/data/users/create"})}},[t.data]),o.useEffect(()=>{var e;if((e=r==null?void 0:r.data)!=null&&e.shopifyShopId){const a=window.location.search;let i=new URLSearchParams(a).get("state");i&&h.submit({shop:i},{method:"post",action:"/auth/login"})}},[r.data]),d.jsx("div",{style:{display:"flex",height:"400px",justifyContent:"center",alignItems:"center"},children:d.jsxs("div",{style:{textAlign:"center",fontFamily:"sans-serif"},children:[d.jsx("img",{style:{width:"50px",height:"50px"},src:"/loading.svg"}),d.jsx("div",{style:{textAlign:"center"},children:"Connecting..."})]})})}export{_ as default};
