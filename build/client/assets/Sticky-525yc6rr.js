import{r as c,R as r}from"./index-CP26dfb2.js";import{S as d,g as h}from"./context-CVOPGIzy.js";import{M as p}from"./Page-CP5RaZ3z.js";function y(){const i=c.useContext(d);if(!i)throw new p("No StickyManager was provided.");return i}class u extends c.Component{constructor(...e){super(...e),this.state={isSticky:!1,style:{}},this.placeHolderNode=null,this.stickyNode=null,this.setPlaceHolderNode=t=>{this.placeHolderNode=t},this.setStickyNode=t=>{this.stickyNode=t},this.handlePositioning=(t,s=0,o=0,a=0)=>{const{isSticky:n}=this.state;(t&&!n||!t&&n)&&(this.adjustPlaceHolderNode(t),this.setState({isSticky:!n},()=>{if(this.props.onStickyChange==null||(this.props.onStickyChange(!n),this.props.boundingElement==null))return null;this.props.boundingElement.toggleAttribute("data-sticky-active")}));const l=t?{position:"fixed",top:s,left:o,width:a}:{};this.setState({style:l})},this.adjustPlaceHolderNode=t=>{this.placeHolderNode&&this.stickyNode&&(this.placeHolderNode.style.paddingBottom=t?`${h(this.stickyNode).height}px`:"0px")}}componentDidMount(){const{boundingElement:e,offset:t=!1,disableWhenStacked:s=!1,stickyManager:o}=this.props;!this.stickyNode||!this.placeHolderNode||o.registerStickyItem({stickyNode:this.stickyNode,placeHolderNode:this.placeHolderNode,handlePositioning:this.handlePositioning,offset:t,boundingElement:e,disableWhenStacked:s})}componentWillUnmount(){const{stickyManager:e}=this.props;this.stickyNode&&e.unregisterStickyItem(this.stickyNode)}render(){const{style:e,isSticky:t}=this.state,{children:s}=this.props,o=k(s)?s(t):s;return r.createElement("div",null,r.createElement("div",{ref:this.setPlaceHolderNode}),r.createElement("div",{ref:this.setStickyNode,style:e},o))}}function k(i){return typeof i=="function"}function m(i){const e=y();return r.createElement(u,Object.assign({},i,{stickyManager:e}))}export{m as S};
